<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<form id="loginForm">
    <label for="username">Username:</label>
    <input type="text" id="username" name="username">
    <label for="password">Password:</label>
    <input type="password" id="password" name="password">   

    <button type="submit">Login</button>
  </form>

  <script>
    const loginForm = document.getElementById('loginForm');

loginForm.addEventListener('submit', async (event) => {
  event.preventDefault();

  const   
 username = document.getElementById('username').value;
  const password = document.getElementById('password').value;   


  // Hash the input password
  const hashedInputPassword = await hashPassword(password);

  // Read and hash passwords from the text file
  const hashedPasswords = await readAndHashPasswordsFromFile('credentials.txt');

  // Authenticate user
  if (hashedPasswords.hasOwnProperty(username) && hashedPasswords[username] === hashedInputPassword) {
    // Set session (replace with actual session management)
    sessionStorage.setItem('authenticated', true);
    // Redirect to protected page or perform other actions
    window.location.href = 'protected_page.html';
  } else {
    // Handle authentication failure
    alert('Invalid username or password');
  }
});

// Helper function to hash a password
async function hashPassword(password) {
  // Use a strong hashing algorithm like bcrypt or Argon2
  const hashedPassword = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(password));
  return Array.from(new Uint8Array(hashedPassword)).map(byte => byte.toString(16).padStart(2, '0')).join('');
}

// Helper function to read and hash passwords from a file
async function readAndHashPasswordsFromFile(filename) {
  const response = await fetch(filename);
  const text = await response.text();
  const lines = text.split('\n');
  const hashedPasswords = {};

  for (const line of lines) {
    const [username, hashedPassword] = line.split(':');
    hashedPasswords[username] = hashedPassword;
  }

  return hashedPasswords;
}
  </script>
</html>